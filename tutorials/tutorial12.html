<!DOCTYPE html>
<html>
<head> 
    <link rel="stylesheet" href="/css/main.css"> 
    <script
    src="/js/jquery/dist/jquery.min.js"> </script>
</head>

<body id = "learningPage">
    <div id = "learningArea">
     <div id = "lessonArea">
     <h2 class = "tutorialHeading">Tutorial 12: Moving the Ghost Objects </h2>
     <label>
     The ghost objects are moved by using boolean variables and collision handling. </br></br>

     If a ghost object collides with a wall, the boolean is updated and the object will move in the opposite direction.  </br></br>

     The update function is used to check the status of the boolean variable. </br></br> 

     <b> Step 1: Code to Add: </br></br>
    Add these variables before the destroy_list array. </b>
    </br>
    var enemyRight = true; </br>
    var enemyRight2 = true; </br>
    var enemyDown = true; </br>
    var enemyDown2 = true; </br></br>

    You will now add four if statements into the update function to control the direction and speed of the ghost objects. </br> </br>

    <b> Step 2: Code to Add: </br></br>
    Add these if statements into the update function </b> </br> </br>
    </br>
    if(enemyRight) {</br>
    enemy1.GetBody().SetLinearVelocity(new b2Vec2(5, enemy1.GetBody().GetLinearVelocity().y));</br>
    </br>
    } else {</br>
    enemy1.GetBody().SetLinearVelocity(new b2Vec2(-5, enemy1.GetBody().GetLinearVelocity().y));</br>
    };</br>
    </br>
    if(enemyRight2) {</br>
    enemy4.GetBody().SetLinearVelocity(new b2Vec2(5, enemy4.GetBody().GetLinearVelocity().y));</br>
    </br>
    } else {</br>
    enemy4.GetBody().SetLinearVelocity(new b2Vec2(-5, enemy4.GetBody().GetLinearVelocity().y));</br>
    };</br>
    </br>
    if(enemyDown) {</br>
    enemy2.GetBody().SetLinearVelocity(new b2Vec2(0, 5, enemy2.GetBody().GetLinearVelocity().y));</br>
    </br>
    } else {</br>
    enemy2.GetBody().SetLinearVelocity(new b2Vec2(0, -5, enemy2.GetBody().GetLinearVelocity().y));</br>
    };</br>
    </br>
    if(enemyDown2) {</br>
    enemy3.GetBody().SetLinearVelocity(new b2Vec2(0, 5, enemy3.GetBody().GetLinearVelocity().y));</br>
    </br>
    } else {</br>
    enemy3.GetBody().SetLinearVelocity(new b2Vec2(0, -5, enemy3.GetBody().GetLinearVelocity().y)); </br>
    };</br></br>

    <b> Step 3: </b> </br></br>
    Finally, we need to handle the BeginContact collision. This will update the boolean variable to change the direction of the Ghost. </br></br>
    Info: Updating the status of an object within the contact listener can cause the game to crash. This is why the boolean variable update method is used. </br></br>

    <b> Code to Add: </br></br>
    Add this code in to the BeginContact Listener. The four ghost objects should move between walls when your code is executed </b> </br> </br>

    if(contact.GetFixtureA().GetBody().GetUserData().id == "enemy1" && contact.GetFixtureB().GetBody().GetUserData().id == "right") {	</br>
	enemyRight = false;	 </br>
	} else if (contact.GetFixtureB().GetBody().GetUserData().id == "enemy1" && contact.GetFixtureA().GetBody().GetUserData().id == "right") { </br>
	enemyRight = false;</br>
};</br>
</br>
if(contact.GetFixtureA().GetBody().GetUserData().id == "enemy1" && contact.GetFixtureB().GetBody().GetUserData().id == "left") {	</br>
	enemyRight = true;	</br>
	} else if (contact.GetFixtureB().GetBody().GetUserData().id == "enemy1" && contact.GetFixtureA().GetBody().GetUserData().id == "left") {</br>
	enemyRight = true;</br>
};</br>

</br>
if(contact.GetFixtureA().GetBody().GetUserData().id == "enemy2" && contact.GetFixtureB().GetBody().GetUserData().id == "canvasTop") {	</br>
	enemyDown = true;	</br>
	} else if (contact.GetFixtureB().GetBody().GetUserData().id == "enemy2" && contact.GetFixtureA().GetBody().GetUserData().id == "canvasTop") {</br>
	enemyDown = true;</br>
};</br>
</br>
if(contact.GetFixtureA().GetBody().GetUserData().id == "enemy2" && contact.GetFixtureB().GetBody().GetUserData().id == "bottom") {	</br>
	enemyDown = false;	</br>
	} else if (contact.GetFixtureB().GetBody().GetUserData().id == "enemy2" && contact.GetFixtureA().GetBody().GetUserData().id == "bottom") { </br>
	enemyDown = false;</br>
};</br>

</br>
if(contact.GetFixtureA().GetBody().GetUserData().id == "enemy3" && contact.GetFixtureB().GetBody().GetUserData().id == "canvasTop") {	</br>
	enemyDown2 = true;	</br>
	} else if (contact.GetFixtureB().GetBody().GetUserData().id == "enemy3" && contact.GetFixtureA().GetBody().GetUserData().id == "canvasTop") { </br>
	enemyDown2 = true; </br>
}; </br>
</br>
if(contact.GetFixtureA().GetBody().GetUserData().id == "enemy3" && contact.GetFixtureB().GetBody().GetUserData().id == "bottom") {	</br>
	enemyDown2 = false;	</br>
	} else if (contact.GetFixtureB().GetBody().GetUserData().id == "enemy3" && contact.GetFixtureA().GetBody().GetUserData().id == "bottom") {</br>
	enemyDown2 = false;</br>
};</br>

</br>
if(contact.GetFixtureA().GetBody().GetUserData().id == "enemy4" && contact.GetFixtureB().GetBody().GetUserData().id == "right") {	</br>
	enemyRight2 = false;</br>	
	} else if (contact.GetFixtureB().GetBody().GetUserData().id == "enemy4" && contact.GetFixtureA().GetBody().GetUserData().id == "right") {</br>
	enemyRight2 = false; </br>
};</br>
</br>
if(contact.GetFixtureA().GetBody().GetUserData().id == "enemy4" && contact.GetFixtureB().GetBody().GetUserData().id == "left") {	</br>
	enemyRight2 = true;	</br>
	} else if (contact.GetFixtureB().GetBody().GetUserData().id == "enemy4" && contact.GetFixtureA().GetBody().GetUserData().id == "left") { </br>
	enemyRight2 = true;</br>
};</br>

     </label>   
     </div>
     </div>

</body>


<script src="/js/custom.js"></script>

</html>